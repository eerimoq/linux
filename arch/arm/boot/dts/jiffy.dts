
/dts-v1/;

/ {
 #address-cells = <1>;
 #size-cells = <1>;

 chosen {};
 memory { device_type = "memory"; reg = <0 0>; };

 aliases {
  ethernet0 = &fec1;
  gpio0 = &gpio1;
  mmc0 = &usdhc1;
  serial1 = &uart2;
 };

 cpus {
  #address-cells = <1>;
  #size-cells = <0>;

  cpu0: cpu@0 {
   compatible = "arm,cortex-a7";
   device_type = "cpu";
   reg = <0>;
   clock-latency = <61036>;
   operating-points = <

    528000 1175000
    396000 1025000
    198000 950000
   >;
   fsl,soc-operating-points = <

    528000 1175000
    396000 1175000
    198000 1175000
   >;
   clocks = <&clks 93>,
     <&clks 26>,
     <&clks 38>,
     <&clks 219>,
     <&clks 56>,
     <&clks 57>,
     <&clks 25>,
     <&clks 18>,
     <&clks 11>,
     <&clks 4>,
     <&clks 3>;
   clock-names = "arm", "pll2_bus", "pll2_pfd2_396m",
          "secondary_sel", "step", "pll1_sw",
          "pll1_sys", "pll1_bypass", "pll1",
          "pll1_bypass_src", "osc";
   arm-supply = <&reg_arm>;
   soc-supply = <&reg_soc>;
  };
 };

 intc: interrupt-controller@00a01000 {
  compatible = "arm,gic-400", "arm,cortex-a7-gic";
  #interrupt-cells = <3>;
  interrupt-controller;
  reg = <0x00a01000 0x1000>,
        <0x00a02000 0x2000>,
        <0x00a04000 0x2000>,
        <0x00a06000 0x2000>;
 };

 ckil: clock-cli {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <32768>;
  clock-output-names = "ckil";
 };

 osc: clock-osc {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <24000000>;
  clock-output-names = "osc";
 };

 ipp_di0: clock-di0 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <0>;
  clock-output-names = "ipp_di0";
 };

 ipp_di1: clock-di1 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <0>;
  clock-output-names = "ipp_di1";
 };

 soc {
  #address-cells = <1>;
  #size-cells = <1>;
  compatible = "simple-bus";
  interrupt-parent = <&gpc>;
  ranges;

  pmu {
   compatible = "arm,cortex-a7-pmu";
   interrupts = <0 94 4>;
   status = "disabled";
  };

  ocram: sram@00900000 {
   compatible = "mmio-sram";
   reg = <0x00900000 0x20000>;
  };

  dma_apbh: dma-apbh@01804000 {
   compatible = "fsl,imx6q-dma-apbh", "fsl,imx28-dma-apbh";
   reg = <0x01804000 0x2000>;
   interrupts = <0 13 4>,
         <0 13 4>,
         <0 13 4>,
         <0 13 4>;
   interrupt-names = "gpmi0", "gpmi1", "gpmi2", "gpmi3";
   #dma-cells = <1>;
   dma-channels = <4>;
   clocks = <&clks 128>;
  };

  gpmi: gpmi-nand@01806000 {
   compatible = "fsl,imx6q-gpmi-nand";
   #address-cells = <1>;
   #size-cells = <1>;
   reg = <0x01806000 0x2000>, <0x01808000 0x2000>;
   reg-names = "gpmi-nand", "bch";
   interrupts = <0 15 4>;
   interrupt-names = "bch";
   clocks = <&clks 133>,
     <&clks 134>,
     <&clks 132>,
     <&clks 131>,
     <&clks 220>;
   clock-names = "gpmi_io", "gpmi_apb", "gpmi_bch",
          "gpmi_bch_apb", "per1_bch";
   dmas = <&dma_apbh 0>;
   dma-names = "rx-tx";
   status = "disabled";
  };

  aips1: aips-bus@02000000 {
   compatible = "fsl,aips-bus", "simple-bus";
   #address-cells = <1>;
   #size-cells = <1>;
   reg = <0x02000000 0x100000>;
   ranges;

   spba-bus@02000000 {
    compatible = "fsl,spba-bus", "simple-bus";
    #address-cells = <1>;
    #size-cells = <1>;
    reg = <0x02000000 0x40000>;
    ranges;
   };

   tsc: tsc@02040000 {
    compatible = "fsl,imx6ul-tsc";
    reg = <0x02040000 0x4000>, <0x0219c000 0x4000>;
    interrupts = <0 3 4>,
          <0 101 4>;
    clocks = <&clks 100>,
      <&clks 124>;
    clock-names = "tsc", "adc";
    status = "disabled";
   };

   gpt1: gpt@02098000 {
    compatible = "fsl,imx6ul-gpt", "fsl,imx6sx-gpt";
    reg = <0x02098000 0x4000>;
    interrupts = <0 55 4>;
    clocks = <&clks 152>,
      <&clks 153>;
    clock-names = "ipg", "per";
   };

   gpio1: gpio@0209c000 {
    compatible = "fsl,imx6ul-gpio", "fsl,imx35-gpio";
    reg = <0x0209c000 0x4000>;
    interrupts = <0 66 4>,
          <0 67 4>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 23 10>, <&iomuxc 10 17 6>,
           <&iomuxc 16 33 16>;
   };

   kpp: kpp@020b8000 {
    compatible = "fsl,imx6ul-kpp", "fsl,imx6q-kpp", "fsl,imx21-kpp";
    reg = <0x020b8000 0x4000>;
    interrupts = <0 82 4>;
    clocks = <&clks 224>;
    status = "disabled";
   };

   wdog1: wdog@020bc000 {
    compatible = "fsl,imx6ul-wdt", "fsl,imx21-wdt";
    reg = <0x020bc000 0x4000>;
    interrupts = <0 80 4>;
    clocks = <&clks 208>;
   };

   clks: ccm@020c4000 {
    compatible = "fsl,imx6ul-ccm";
    reg = <0x020c4000 0x4000>;
    interrupts = <0 87 4>,
          <0 88 4>;
    #clock-cells = <1>;
    clocks = <&ckil>, <&osc>, <&ipp_di0>, <&ipp_di1>;
    clock-names = "ckil", "osc", "ipp_di0", "ipp_di1";
   };

   anatop: anatop@020c8000 {
    compatible = "fsl,imx6ul-anatop", "fsl,imx6q-anatop",
          "syscon", "simple-bus";
    reg = <0x020c8000 0x1000>;
    interrupts = <0 49 4>,
          <0 54 4>,
          <0 127 4>;

    reg_3p0: regulator-3p0 {
     compatible = "fsl,anatop-regulator";
     regulator-name = "vdd3p0";
     regulator-min-microvolt = <2625000>;
     regulator-max-microvolt = <3400000>;
     anatop-reg-offset = <0x120>;
     anatop-vol-bit-shift = <8>;
     anatop-vol-bit-width = <5>;
     anatop-min-bit-val = <0>;
     anatop-min-voltage = <2625000>;
     anatop-max-voltage = <3400000>;
     anatop-enable-bit = <0>;
    };

    reg_arm: regulator-vddcore {
     compatible = "fsl,anatop-regulator";
     regulator-name = "cpu";
     regulator-min-microvolt = <725000>;
     regulator-max-microvolt = <1450000>;
     regulator-always-on;
     anatop-reg-offset = <0x140>;
     anatop-vol-bit-shift = <0>;
     anatop-vol-bit-width = <5>;
     anatop-delay-reg-offset = <0x170>;
     anatop-delay-bit-shift = <24>;
     anatop-delay-bit-width = <2>;
     anatop-min-bit-val = <1>;
     anatop-min-voltage = <725000>;
     anatop-max-voltage = <1450000>;
    };

    reg_soc: regulator-vddsoc {
     compatible = "fsl,anatop-regulator";
     regulator-name = "vddsoc";
     regulator-min-microvolt = <725000>;
     regulator-max-microvolt = <1450000>;
     regulator-always-on;
     anatop-reg-offset = <0x140>;
     anatop-vol-bit-shift = <18>;
     anatop-vol-bit-width = <5>;
     anatop-delay-reg-offset = <0x170>;
     anatop-delay-bit-shift = <28>;
     anatop-delay-bit-width = <2>;
     anatop-min-bit-val = <1>;
     anatop-min-voltage = <725000>;
     anatop-max-voltage = <1450000>;
    };
   };

   epit1: epit@020d0000 {
    reg = <0x020d0000 0x4000>;
    interrupts = <0 56 4>;
   };

   epit2: epit@020d4000 {
    reg = <0x020d4000 0x4000>;
    interrupts = <0 57 4>;
   };

   src: src@020d8000 {
    compatible = "fsl,imx6ul-src", "fsl,imx51-src";
    reg = <0x020d8000 0x4000>;
    interrupts = <0 91 4>,
          <0 96 4>;
    #reset-cells = <1>;
   };

   gpc: gpc@020dc000 {
    compatible = "fsl,imx6ul-gpc", "fsl,imx6q-gpc";
    reg = <0x020dc000 0x4000>;
    interrupt-controller;
    #interrupt-cells = <3>;
    interrupts = <0 89 4>;
    interrupt-parent = <&intc>;
   };

   iomuxc: iomuxc@020e0000 {
    compatible = "fsl,imx6ul-iomuxc";
    reg = <0x020e0000 0x4000>;
   };

   gpr: iomuxc-gpr@020e4000 {
    compatible = "fsl,imx6ul-iomuxc-gpr",
          "fsl,imx6q-iomuxc-gpr", "syscon";
    reg = <0x020e4000 0x4000>;
   };

   gpt2: gpt@020e8000 {
    compatible = "fsl,imx6ul-gpt", "fsl,imx6sx-gpt";
    reg = <0x020e8000 0x4000>;
    interrupts = <0 109 4>;
    clocks = <&clks 154>,
      <&clks 155>;
    clock-names = "ipg", "per";
   };

   sdma: sdma@020ec000 {
    compatible = "fsl,imx6ul-sdma", "fsl,imx6q-sdma",
          "fsl,imx35-sdma";
    reg = <0x020ec000 0x4000>;
    interrupts = <0 2 4>;
    clocks = <&clks 184>,
      <&clks 184>;
    clock-names = "ipg", "ahb";
    #dma-cells = <3>;
    fsl,sdma-ram-script-name = "imx/sdma/sdma-imx6q.bin";
   };
  };

  aips2: aips-bus@02100000 {
   compatible = "fsl,aips-bus", "simple-bus";
   #address-cells = <1>;
   #size-cells = <1>;
   reg = <0x02100000 0x100000>;
   ranges;

   fec1: ethernet@02188000 {
    compatible = "fsl,imx6ul-fec", "fsl,imx6q-fec";
    reg = <0x02188000 0x4000>;
    interrupts = <0 118 4>,
          <0 119 4>;
    clocks = <&clks 144>,
      <&clks 145>,
      <&clks 48>,
      <&clks 44>,
      <&clks 44>;
    clock-names = "ipg", "ahb", "ptp",
           "enet_clk_ref", "enet_out";
    fsl,num-tx-queues=<1>;
    fsl,num-rx-queues=<1>;
    status = "disabled";
   };

   usdhc1: usdhc@02190000 {
    compatible = "fsl,imx6ul-usdhc", "fsl,imx6sx-usdhc";
    reg = <0x02190000 0x4000>;
    interrupts = <0 22 4>;
    clocks = <&clks 206>,
      <&clks 206>,
      <&clks 206>;
    clock-names = "ipg", "ahb", "per";
    bus-width = <4>;
    status = "disabled";
   };

   mmdc: mmdc@021b0000 {
    compatible = "fsl,imx6ul-mmdc", "fsl,imx6q-mmdc";
    reg = <0x021b0000 0x4000>;
   };

   uart2: serial@021e8000 {
    compatible = "fsl,imx6ul-uart",
          "fsl,imx6q-uart";
    reg = <0x021e8000 0x4000>;
    interrupts = <0 27 4>;
    clocks = <&clks 191>,
      <&clks 192>;
    clock-names = "ipg", "per";
    status = "disabled";
   };
  };
 };
};

/ {
        model = "Jiffy";
        compatible = "fsl,imx6ul-14x14-evk", "fsl,imx6ul";

        chosen {
            bootargs = "console=ttymxc1,115200 ";
            linux,initrd-start = <0x83f00000>;
            linux,initrd-end = <0x84071a00>;
            stdout-path = &uart2;
        };

        memory {
                reg = <0x80000000 0x8000000>;
        };

        regulators {
                compatible = "simple-bus";
                #address-cells = <1>;
                #size-cells = <0>;
        };
};

&clks {
        assigned-clocks = <&clks 50>;
        assigned-clock-rates = <786432000>;
};

&cpu0 {
        vcc-operating-points = <
                696000 1400000
                528000 1300000
                396000 1300000
                198000 1300000
        >;
    clock-frequency = <528000000>;
        arm-supply = <&reg_arm>;
        soc-supply = <&reg_soc>;

};

&fec1 {
    pinctrl-names = "default";
    pinctrl-0 = <&pinctrl_enet1>;
    phy-mode = "rmii";
    // Comment pht-handle to use fixed config (not autoneg)
    phy-handle = <&ethphy0>;
    phy-reset-gpios = <&gpio1 22 1>;
    phy-reset-duration = <10>;
    phy-reset-post-delay = <1>;
    status = "okay";
    mac-address = [5e fd f9 ca b5 3e];
    mdio {
            #address-cells = <1>;
            #size-cells = <0>;

            ethphy0: ethernet-phy@1 {
              reg = <1>;
              status = "okay";
            };
    };
//    fixed-link {
//        full-duplex;
//        speed = <100>;
//    };
};

&uart2 {
        pinctrl-names = "default";
        pinctrl-0 = <&pinctrl_uart2>;
        status = "okay";
};

&usdhc1 {
        pinctrl-names = "default";
        pinctrl-0 = <&pinctrl_usdhc1>;
        bus-width = <8>;
        no-1-8-v;
        non-removable;
        keep-power-in-suspend;
        status = "okay";
        no-sdio;
        no-sd;
};

&wdog1 {
        status = "okay";
};

&iomuxc {
        pinctrl-names = "default";
        pinctrl_enet1: enet1grp {
                fsl,pins = <
                        0x0078 0x0304 0x0000 0 0 0x1b0b0
                        0x0074 0x0300 0x0578 0 0 0x1b0b0
                        0x00cc 0x0358 0x0000 0 0 0x1b0b0
                        0x00e0 0x036c 0x0000 0 0 0x1b0b0
                        0x00c4 0x0350 0x0000 0 0 0x1b0b0
                        0x00c8 0x0354 0x0000 0 0 0x1b0b0
                        0x00d8 0x0364 0x0000 0 0 0x1b0b0
                        0x00d0 0x035c 0x0000 0 0 0x1b0b0
                        0x00d4 0x0360 0x0000 0 0 0x1b0b0
                        0x00dc 0x0368 0x0574 4 2 0x4001b031
                        0x009c 0x0328 0x0000 5 0 0x17059
                >;
        };

        pinctrl_uart2: uart2grp {
                fsl,pins = <
                      0x0094 0x0320 0x0000 0 0 0x1b0b1
                      0x0098 0x0324 0x062c 0 1 0x1b0b1
                >;
        };

        pinctrl_usdhc1: usdhc1grp {
                fsl,pins = <
                        0x01bc 0x0448 0x0000 0 0 0x170f9
                        0x01c0 0x044c 0x0000 0 0 0x100f9
                        0x01c4 0x0450 0x0000 0 0 0x170f9
                        0x01c8 0x0454 0x0000 0 0 0x170f9
                        0x01cc 0x0458 0x0000 0 0 0x170f9
                        0x01d0 0x045c 0x0000 0 0 0x170f9
                        0x01a8 0x0434 0x0000 1 0 0x170f9
                        0x01ac 0x0438 0x0000 1 0 0x170f9
                        0x01b0 0x043c 0x0000 1 0 0x170f9
                        0x01b4 0x0440 0x0000 1 0 0x170f9
                >;
        };
};
